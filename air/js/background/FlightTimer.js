var getFlightTimer=function(n,t){return arguments[1]===undefined&&(t=config.monitor.interval),new Timer(n,t,config.monitor.interval,function(n){var r=(new FlightMonitorBox).get(n.id),t=r.flight,u=r.monitor,f=t.data,i=!1;u.lastTime=Util.date.now();t.getData(!0,!0,function(n){u.type=="absolute"?parseInt(n.main.price,10)<parseInt(f.main.price,10)&&(Storage.set("showStage",{name:"ticketNotice",data:t.getId()}),i=!0):parseInt(n.main.price,10)!=parseInt(f.main.price,10)&&(Storage.set("showStage",{name:"ticketNotice",data:t.getId()}),i=!0);delete r.error;chrome.browserAction.setBadgeText({text:""})},function(u){u.name==="QuerySoldOutError"?(Storage.set("showStage",{name:"ticketAdvice",data:{errors:[{flightId:t.getId(),status:"已售罄"}],advice:"请您重新设置"}}),n.halt(),i=!0):u.name==="QueryDateError"&&(Storage.set("showStage",{name:"ticketAdvice",data:{errors:[{flightId:t.getId(),status:"已过期"}],advice:"请您重新设置"}}),n.halt(),i=!0);r.error=u;chrome.browserAction.setBadgeText({text:"!"})},function(){(new FlightMonitorBox).persistenceOne(t.getId());i&&Util.popup()})})}